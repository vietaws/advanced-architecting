## KMS Customer Key Terms and Concepts

### Key Terms for Customer Managed Keys

#### 1. Customer Managed Key (CMK)

Definition: KMS key that YOU create, own, and manage

Characteristics:
- You control key policy
- You can enable/disable
- You can delete (with waiting period)
- You pay $1/month per key
- You control rotation

Example:
bash
# Create customer managed key
aws kms create-key \
  --description "My customer managed key" \
  --key-usage ENCRYPT_DECRYPT

# You own and control this key


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


#### 2. Key ID

Definition: Unique identifier for the key (UUID format)

Format: 1234abcd-12ab-34cd-56ef-1234567890ab

Characteristics:
- Globally unique
- Never changes
- Generated by AWS
- Used in API calls

Example:
bash
# Get key ID
aws kms list-keys
# Output: KeyId: 1234abcd-12ab-34cd-56ef-1234567890ab


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


#### 3. Key ARN (Amazon Resource Name)

Definition: Full resource identifier for the key

Format: arn:aws:kms:region:account-id:key/key-id

Example:
arn:aws:kms:us-east-1:123456789012:key/1234abcd-12ab-34cd-56ef-1234567890ab


Used for:
- IAM policies
- Cross-account access
- Resource tagging

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


#### 4. Key Alias

Definition: Human-readable name for the key

Format: alias/my-key-name

Characteristics:
- Easy to remember
- Can be changed to point to different keys
- Unique per account/region
- Free (no additional cost)

Example:
bash
# Create alias
aws kms create-alias \
  --alias-name alias/my-app-key \
  --target-key-id 1234abcd-12ab-34cd-56ef-1234567890ab

# Use in application
KeyId: 'alias/my-app-key'  # Instead of UUID


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


#### 5. Key State

Definition: Current status of the key

States:
- **Enabled** - Active, can be used
- **Disabled** - Inactive, cannot be used
- **PendingDeletion** - Scheduled for deletion (7-30 days)
- **PendingImport** - Waiting for key material import
- **Unavailable** - Temporarily unavailable

Example:
bash
# Check key state
aws kms describe-key --key-id KEY-ID \
  --query 'KeyMetadata.KeyState'

# Disable key
aws kms disable-key --key-id KEY-ID

# Enable key
aws kms enable-key --key-id KEY-ID


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


#### 6. Key Policy

Definition: JSON document that controls who can use and manage the key

Example:
json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "Enable IAM User Permissions",
      "Effect": "Allow",
      "Principal": {
        "AWS": "arn:aws:iam::123456789012:root"
      },
      "Action": "kms:*",
      "Resource": "*"
    },
    {
      "Sid": "Allow use of the key",
      "Effect": "Allow",
      "Principal": {
        "AWS": "arn:aws:iam::123456789012:role/AppRole"
      },
      "Action": [
        "kms:Decrypt",
        "kms:Encrypt",
        "kms:GenerateDataKey"
      ],
      "Resource": "*"
    }
  ]
}


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


#### 7. Key Usage

Definition: What the key can be used for

Types:
- **ENCRYPT_DECRYPT** - Symmetric/asymmetric encryption
- **SIGN_VERIFY** - Digital signatures (asymmetric only)

Example:
bash
# Create key for encryption
aws kms create-key --key-usage ENCRYPT_DECRYPT

# Create key for signing
aws kms create-key --key-usage SIGN_VERIFY


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


#### 8. Key Spec (Key Specification)

Definition: Type of key material and algorithm

Symmetric:
- SYMMETRIC_DEFAULT - AES-256-GCM

Asymmetric (Encryption):
- RSA_2048
- RSA_3072
- RSA_4096

Asymmetric (Signing):
- RSA_2048
- RSA_3072
- RSA_4096
- ECC_NIST_P256
- ECC_NIST_P384
- ECC_NIST_P521

Example:
bash
# Symmetric key
aws kms create-key --key-spec SYMMETRIC_DEFAULT

# Asymmetric RSA key
aws kms create-key \
  --key-spec RSA_2048 \
  --key-usage ENCRYPT_DECRYPT


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


#### 9. Key Origin

Definition: Where the key material comes from

Types:
- **AWS_KMS** - Generated by AWS (default)
- **EXTERNAL** - Imported by you (BYOK)
- **AWS_CLOUDHSM** - Generated in CloudHSM

Example:
bash
# AWS-generated key
aws kms create-key --origin AWS_KMS

# External key (BYOK)
aws kms create-key --origin EXTERNAL

# CloudHSM key
aws kms create-key \
  --origin AWS_CLOUDHSM \
  --custom-key-store-id cks-xxxxx


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


#### 10. Key Rotation

Definition: Automatic creation of new key version while keeping old versions

Characteristics:
- Rotates every 365 days (automatic)
- Old versions kept for decryption
- Key ID and alias stay the same
- Free (no additional cost)

Example:
bash
# Enable automatic rotation
aws kms enable-key-rotation --key-id KEY-ID

# Check rotation status
aws kms get-key-rotation-status --key-id KEY-ID


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


#### 11. Key Deletion

Definition: Permanent removal of key (irreversible)

Characteristics:
- Waiting period: 7-30 days
- Can cancel during waiting period
- After deletion, encrypted data is unrecoverable
- Cannot be undone after waiting period

Example:
bash
# Schedule deletion (30 days)
aws kms schedule-key-deletion \
  --key-id KEY-ID \
  --pending-window-in-days 30

# Cancel deletion
aws kms cancel-key-deletion --key-id KEY-ID


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


#### 12. Data Key

Definition: Symmetric key generated by KMS for envelope encryption

Characteristics:
- Used to encrypt large data
- Generated by KMS master key
- Returned in plaintext and encrypted form
- Not stored by KMS

Example:
javascript
const { GenerateDataKeyCommand } = require('@aws-sdk/client-kms');

// Generate data key
const response = await kms.send(new GenerateDataKeyCommand({
  KeyId: 'alias/my-key',
  KeySpec: 'AES_256'
}));

// Returns:
// - Plaintext data key (use to encrypt)
// - Encrypted data key (store with encrypted data)


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


#### 13. Envelope Encryption

Definition: Encrypting data with a data key, then encrypting the data key with a master key

Process:
1. Generate data key from KMS master key
2. Encrypt data with data key (locally)
3. Store encrypted data + encrypted data key
4. Discard plaintext data key

Decryption:
1. Send encrypted data key to KMS
2. KMS decrypts data key with master key
3. Use plaintext data key to decrypt data
4. Discard plaintext data key


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


#### 14. Grant

Definition: Temporary permission to use a key

Characteristics:
- Alternative to key policy
- Can be created/revoked programmatically
- Used for temporary access
- Useful for AWS services

Example:
bash
# Create grant
aws kms create-grant \
  --key-id KEY-ID \
  --grantee-principal arn:aws:iam::123456789012:role/AppRole \
  --operations Encrypt Decrypt GenerateDataKey

# List grants
aws kms list-grants --key-id KEY-ID

# Revoke grant
aws kms revoke-grant --key-id KEY-ID --grant-id GRANT-ID


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


#### 15. Encryption Context

Definition: Additional authenticated data (AAD) for encryption

Characteristics:
- Key-value pairs
- Not encrypted, but authenticated
- Must provide same context for decryption
- Used for audit logging

Example:
javascript
// Encrypt with context
await kms.send(new EncryptCommand({
  KeyId: 'alias/my-key',
  Plaintext: Buffer.from('secret'),
  EncryptionContext: {
    'Department': 'Finance',
    'Project': 'Q1-2026'
  }
}));

// Decrypt (must provide same context)
await kms.send(new DecryptCommand({
  CiphertextBlob: encrypted,
  EncryptionContext: {
    'Department': 'Finance',
    'Project': 'Q1-2026'
  }
}));


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


#### 16. Multi-Region Key

Definition: Key replicated across multiple AWS regions

Characteristics:
- Same key ID in all regions
- Encrypt in one region, decrypt in another
- Automatic replication
- $1/month per region

Example:
bash
# Create multi-region key
aws kms create-key \
  --multi-region true \
  --region us-east-1

# Replicate to another region
aws kms replicate-key \
  --key-id mrk-xxxxx \
  --replica-region eu-west-1


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


## Summary of Key Terms

| Term | Definition | Example |
|------|------------|---------|
| Customer Managed Key | Key you create and control | Your application key |
| Key ID | Unique identifier (UUID) | 1234abcd-12ab-... |
| Key ARN | Full resource name | arn:aws:kms:... |
| Alias | Human-readable name | alias/my-key |
| Key State | Current status | Enabled/Disabled |
| Key Policy | Access control document | JSON policy |
| Key Usage | Purpose of key | ENCRYPT_DECRYPT |
| Key Spec | Algorithm type | SYMMETRIC_DEFAULT |
| Key Origin | Source of key material | AWS_KMS/EXTERNAL |
| Key Rotation | Automatic key versioning | Every 365 days |
| Data Key | Encryption key for data | AES-256 key |
| Envelope Encryption | Two-layer encryption | Data key + master key |
| Grant | Temporary permission | Time-limited access |
| Encryption Context | Additional metadata | Key-value pairs |
| Multi-Region Key | Replicated key | Same ID across regions |

These are the core terms you need to understand when working with KMS customer managed keys.